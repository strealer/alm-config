# Puppet Agent Configuration
# This file is managed by the puppet-config.sh script
#
# IMPORTANT: This file exists in TWO repositories:
# 1. alm-infra/puppet-infra-config/client-setup/puppet.conf (private repo)
# 2. alm-config/system-files/puppet.conf (THIS FILE - PUBLIC repo - used by pi-gen)
#
# When updating this file, ALWAYS update BOTH locations!
# The alm-infra version is used for manual setups and reference.

[main]
server = puppet.strealer.io

[agent]
certname = %%HOSTNAME%%
waitforcert = 60
# Runs the agent service every 30 minutes
# Optimized for:
# - Allowing Docker image pulls to complete without overlapping runs
# - Reducing Puppet server load (600 devices = 20 req/min vs 120 req/min @ 5min)
# - Better thermal management on Raspberry Pi devices
# - Reduces unnecessary network traffic and CPU cycles
# - Deployments still complete within acceptable timeframe (worst case: 30-35 min)
runinterval = 1800
environment = production
