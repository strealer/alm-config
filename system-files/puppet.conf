# Puppet Agent Configuration
# This file is managed by the puppet-config.sh script
#
# SOURCE: alm-config/system-files/puppet.conf
# DEPLOYED BY: Puppet (downloads from public GitHub raw URL), pi-gen (baked into image)

[main]
server = puppet.strealer.io

[agent]
certname = %%HOSTNAME%%
waitforcert = 60
# Runs the agent service every 30 minutes
# Optimized for:
# - Allowing Docker image pulls to complete without overlapping runs
# - Reducing Puppet server load (600 devices = 20 req/min vs 120 req/min @ 5min)
# - Better thermal management on Raspberry Pi devices
# - Reduces unnecessary network traffic and CPU cycles
# - Deployments still complete within acceptable timeframe (worst case: 30-35 min)
runinterval = 1800
environment = production
